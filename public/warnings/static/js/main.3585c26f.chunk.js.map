{"version":3,"sources":["components/tools/Datetime.js","components/tools/Get.js","components/Map.js","components/Coordinate.js","components/WarningLabel.js","components/WarnPeriod.js","App.js","serviceWorker.js","index.js"],"names":["date2str","date","year_str","getFullYear","month_str","getMonth","day_str","getDate","hour_str","getHours","minute_str","getMinutes","second_str","getSeconds","format_str","replace","str2date","datestr","Date","parse","get","url","a","fetch","then","data","catch","err","console","log","getWarningArea","layer","xmlSearch","option","query","WeatherXmlQueryOption","this","options","status","infotype","title","areaname","areacode","limit","offset","order","timeOpt","datetime","validdatetime","elem","val","v","Object","keys","forEach","key","start","end","start_str","end_str","querytext","length","HoverCordinate","name","className","Map","props","state","mouseover","feature","code","mapboxgl","accessToken","map","container","center","minZoom","maxZoom","zoom","attributionControl","logoPosition","hash","style","localIdeographFontFamily","touchZoomRotate","disableRotation","warning_data","on","addSource","mountLayer","json","renderWaringArea","hoverArea","selectArea","setMouseOver","setState","source_layer","addLayer","warningColor","none","advisory","warning","emergency","stops","push","moveLayer","e","getZoom","features","queryRenderedFeatures","point","layers","getCanvas","cursor","name_prop","properties","layerId","w","code_prop","setFilter","click","filter","c","remove","changeFeaturedArea","ref","Component","Coodinate","prefName","distlictName","divisionName","marginTop","prefCode","WarningLabel","warnings","labels","i","lastIndexOf","WarnPeriod","term","error","callflag","cache","date_str","time","Math","floor","n_time","convertDatetimeFormat","mapIndex","str","s","String","fromCharCode","charCodeAt","num","parseInt","terms","obj","extractNumber","zenkaku2hankaku","term2number","mapping","property","period","startTime","time2mappingIndex","endTime","zoneTime","day_colum","day","columNum","time_colums","type","tag","index","colorClass","mappingPeriod","detail","head","whichTypeWarning","colums","id","value","nextP","nextS","getStartTime","control","dateTime","body","opt","setDate","setValues","setDatetime","res","list","request","link","substring","content","report","finally","days","CreateDays","times","CreateTimes","target","item","area","types","kind","k","CreatePeriod","reportTime","targetDateTime","headline","text","format","date2str_withformat","downloadData","renderFigure","App","warn","JSON","stringify","handleClick","doopen","isMenuOpened","sw","window","innerWidth","width","canvasSizeModuler","transitionDuration","effect","position","selectFeature","fontSize","onClick","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.3585c26f.chunk.js","sourcesContent":["export function date2str(date) {\r\n    var year_str = date.getFullYear();\r\n    //月だけ+1すること\r\n    var month_str = 1 + date.getMonth();\r\n    var day_str = date.getDate();\r\n    var hour_str = date.getHours();\r\n    var minute_str = date.getMinutes();\r\n    var second_str = date.getSeconds();\r\n    \r\n    \r\n    var format_str = 'YYYY-MM-DD hh:mm:ss';\r\n    format_str = format_str.replace(/YYYY/g, year_str);\r\n    format_str = format_str.replace(/MM/g, month_str);\r\n    format_str = format_str.replace(/DD/g, day_str);\r\n    format_str = format_str.replace(/hh/g, hour_str);\r\n    format_str = format_str.replace(/mm/g, minute_str);\r\n    format_str = format_str.replace(/ss/g, second_str);\r\n    \r\n    return format_str;\r\n};\r\n\r\nexport function date2str_withformat(date, format) {\r\n \r\n    var year_str = date.getFullYear();\r\n    //月だけ+1すること\r\n    var month_str = 1 + date.getMonth();\r\n    if(month_str < 10) month_str = \"0\" + month_str;\r\n    var day_str = date.getDate();\r\n    if(day_str < 10) day_str = \"0\" + day_str;\r\n    var hour_str = date.getHours();\r\n    if(hour_str < 10) hour_str = \"0\" + hour_str;\r\n    var minute_str = date.getMinutes();\r\n    if(minute_str < 10) minute_str = \"0\" + minute_str;\r\n    var second_str = date.getSeconds();\r\n    if(second_str < 10) second_str = \"0\" + second_str;\r\n    \r\n    var format_str = format;\r\n    format_str = format_str.replace(/YYYY/g, year_str);\r\n    format_str = format_str.replace(/MM/g, month_str);\r\n    format_str = format_str.replace(/DD/g, day_str);\r\n    format_str = format_str.replace(/hh/g, hour_str);\r\n    format_str = format_str.replace(/mm/g, minute_str);\r\n    format_str = format_str.replace(/ss/g, second_str);\r\n    \r\n    return format_str;\r\n};\r\n\r\nexport function str2date(datestr){\r\n    var date = new Date(Date.parse(datestr));\r\n    return new Date(date);\r\n}","import {date2str} from './Datetime.js';\r\n\r\n\r\nexport async function get(url){\r\n    return await fetch(url).then(data => {\r\n        return data;\r\n    }).catch(err => {\r\n        console.log(err);\r\n        return {err: \"error\"};\r\n    });\r\n}\r\n\r\nexport async function getWarningArea(layer){\r\n    return await fetch(\r\n        \"https://s3-ap-northeast-1.amazonaws.com/vector-tile/warning/\"+layer+\".json.gz\"\r\n    ).then(data => {\r\n        return data;\r\n    }).catch(err => {\r\n        console.log(err);\r\n    });\r\n}\r\n\r\nexport async function xmlSearch(option){\r\n    const base = \"//api.aitc.jp/jmardb-api/search?\";\r\n    const url = base + option.query();\r\n    return await fetch(url).then(data => {\r\n        return data;\r\n    }).catch(err => {\r\n        console.log(err);\r\n        return false;\r\n    });\r\n}\r\n\r\n\r\nexport class WeatherXmlQueryOption{\r\n    constructor(){\r\n        this.options = {\r\n            status : \"\",\r\n            infotype: \"\",\r\n            title: \"\",\r\n            areaname: \"\",\r\n            areacode: \"\",\r\n            limit: 3,\r\n            offset: 0,\r\n            order: \"new\",\r\n        };\r\n\r\n        this.timeOpt = {\r\n            datetime: [],\r\n            validdatetime: [],\r\n        }\r\n    }\r\n\r\n    setValue(elem, val) {\r\n        this.options[elem] = val;\r\n    }\r\n\r\n    setValues(v) {\r\n        Object.keys(v).forEach(key => {\r\n            this.options[key] = v[key];\r\n        });\r\n    }\r\n\r\n    setDatetime(start, end){\r\n        const start_str = date2str(start);\r\n        const end_str = date2str(end);\r\n        this.timeOpt[\"datetime\"] = [start_str, end_str];\r\n    }\r\n\r\n    setValidDatetime(start, end){\r\n        this.timeOpt[\"validdatetime\"] = [start, end];\r\n    }\r\n\r\n    readValue(elem) {\r\n        return this.options[elem];\r\n    }\r\n\r\n    query() {\r\n        var querytext = \"\";\r\n        Object.keys(this.options).forEach(key => {\r\n            if(this.options[key]){\r\n                querytext += key + \"=\" + this.options[key] + \"&\";\r\n            }\r\n        });\r\n        \r\n        if(this.timeOpt[\"datetime\"].length === 2){\r\n            querytext += \"datetime=\" + this.timeOpt.datetime[0] \r\n                            + \"&datetime=\" + this.timeOpt.datetime[1] + \"&\";\r\n        }\r\n        return querytext;\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport mapboxgl from 'mapbox-gl';\r\n// import {get} from './Get.js';\r\nimport {getWarningArea} from './tools/Get.js';\r\nimport './style/map.css';\r\n\r\nclass Map extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            mouseover: null,\r\n            feature: null,\r\n            code: \"\",\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const zoomThreshold = 6;\r\n\r\n        // マップの生成\r\n        mapboxgl.accessToken = 'pk.eyJ1IjoibHVuYXNreSIsImEiOiJjazZidGtid2UxNTd1M2tuNTN0cDBzZDMyIn0.8ci4ul7Dh1kg2g6sRfDYQw';\r\n        var map = new mapboxgl.Map({\r\n            container: this.container,\r\n            center: [136.6, 35],\r\n            minZoom: 4,\r\n            maxZoom: 10,\r\n            zoom: 5,\r\n            attributionControl: false,\r\n            logoPosition: 'bottom-right',\r\n            hash: true,\r\n            style: 'mapbox://styles/lunasky/ckbbbjs5v03aq1ipi2crj7ctd',\r\n            localIdeographFontFamily: \"'Hiragino Kaku Gothic ProN', 'ヒラギノ角ゴ ProN W3', Meiryo, メイリオ, sans-serif\",\r\n        });\r\n        map.touchZoomRotate.disableRotation();\r\n\r\n        var warning_data = {};\r\n\r\n        // レイヤーの生成\r\n        map.on('load', () => {\r\n            addSource(\"pref\");\r\n            addSource(\"city\");\r\n\r\n            mountLayer(\"pref\");\r\n            mountLayer(\"city\");\r\n            \r\n            // get(\"/api/warning/pref\").then(v => v.json()).then(v => {\r\n            getWarningArea(\"pref\").then(v => v.json()).then(v => {\r\n                    renderWaringArea('pref', v);\r\n            });\r\n            // get(\"/api/warning/city\").then(v => v.json()).then(v => {\r\n            getWarningArea(\"city\").then(v => v.json()).then(v => {\r\n                renderWaringArea('city', v);\r\n            });\r\n\r\n            map.on('mousemove', hoverArea);\r\n            map.on('click', selectArea);\r\n            \r\n            // createSelectLayer();\r\n        });\r\n\r\n        // マウスオーバー時の名前を表示\r\n        let setMouseOver = (v) => {\r\n            if (this.state.mouseover !== v){\r\n                this.setState({mouseover: v});\r\n            }\r\n        };\r\n\r\n        // 都市選択時の表示\r\n        let clickCity = (v, w) => {\r\n            this.props.click(v, w);\r\n        }\r\n\r\n        //-------------------------- map setting functions\r\n\r\n        function addSource(layer){\r\n\r\n            map.addSource(\"vtile-\" + layer, {\r\n                \"type\": \"vector\",\r\n                \"minzoom\": (layer === 'city') ? zoomThreshold : 4,\r\n                \"tiles\": [\"https://weatherbox.github.io/warning-area-vt/\" + layer + \"/{z}/{x}/{y}.pbf\"],\r\n                \"attribution\": '<a href=\"http://nlftp.mlit.go.jp/ksj/gml/datalist/KsjTmplt-N03-v2_3.html\" target=\"_blank\">国土数値情報</a>'\r\n            });\r\n        }\r\n        \r\n        function mountLayer(layer){\r\n            // Layer's item - pref > distlict > division > city\r\n            var source_layer = ((layer === 'city') ? '' : layer) + 'allgeojson';\r\n\r\n            map.addLayer({\r\n                \"id\": \"selected-area-\" + layer,\r\n                \"type\": \"fill\",\r\n                \"source\": \"vtile-\" + layer,\r\n                \"source-layer\": source_layer,\r\n                \"paint\": {\r\n                    \"fill-color\": \"rgba(255, 55, 55, 1)\",\r\n                    \"fill-outline-color\": \"rgba(244, 244, 244, 1)\",\r\n                },\r\n                \"filter\": [\"==\", \"code\", \"\"],\r\n            });\r\n        }\r\n\r\n        function renderWaringArea(layer, data){\r\n            if (!data) {\r\n                console.log(\"Error: does not get warning data.\");\r\n                return;\r\n            }\r\n            var warningColor = {\r\n                none:      \"rgba(55, 55, 55, 1)\",\r\n                advisory:  \"rgba(254, 242, 99, 1)\",\r\n                warning:   \"rgba(233, 84, 107, 1)\",\r\n                emergency: \"rgba(98, 68, 152, 1)\"\r\n            };\r\n            warning_data[layer] = data[layer + 'list'];\r\n\r\n            var source_layer = ((layer === 'city') ? '' : layer) + 'allgeojson';\r\n            \r\n            var stops = [];\r\n            Object.keys(data[layer + 'list']).forEach((code) => {\r\n                var status = data[layer + 'list'][code].status;\r\n                stops.push([code, warningColor[status]]);\r\n            });\r\n\r\n            map.addLayer({\r\n                \"id\": \"warning-area-\" + layer,\r\n                \"type\": \"fill\",\r\n                \"source\": \"vtile-\" + layer,\r\n                \"source-layer\": source_layer,\r\n                \"paint\": {\r\n                    \"fill-color\": {\r\n                        \"property\": (layer === 'city') ? 'code' : layer + 'Code',\r\n                        \"type\": \"categorical\",\r\n                        \"stops\": stops,\r\n                    },\r\n                    \"fill-outline-color\": \"rgba(123, 124, 125, 0.7)\",\r\n                }\r\n            });\r\n\r\n            map.moveLayer('selected-area-' + layer);\r\n        }\r\n\r\n        function hoverArea(e){\r\n            var layer = (map.getZoom() < zoomThreshold) ? \"pref\":\"city\";\r\n            var features = map.queryRenderedFeatures(e.point, {layers : [\"warning-area-\" + layer]});\r\n            map.getCanvas().style.cursor = (features.length) ? 'crosshair' : '';\r\n        \r\n            if(!features.length){\r\n                setMouseOver(null);\r\n                return;\r\n            }\r\n            var feature = features[0];\r\n            var name_prop = (layer === 'city') ? 'name' : layer + 'Name';\r\n            var name = feature.properties[name_prop];\r\n            setMouseOver(name);\r\n        }\r\n\r\n        function selectArea(e) {\r\n            var layer = (map.getZoom() < zoomThreshold) ? \"pref\" : \"city\";\r\n            var features = map.queryRenderedFeatures(e.point, {layers : [\"warning-area-\" + layer]});\r\n            var layerId = 'selected-area-' + layer;\r\n\r\n            if(!features.length){\r\n                return;\r\n            }\r\n\r\n            var code_prop = (layer === 'city') ? 'code' : layer + 'Code';\r\n            var code = features[0].properties[code_prop];\r\n            map.setFilter(layerId, [\"==\", code_prop, code]);\r\n\r\n            if (layer === 'pref'){\r\n                map.setFilter('selected-area-city', [\"==\", code_prop, code]);\r\n            } else {\r\n                map.setFilter('selected-area-pref', [\"==\", code_prop, code]);\r\n            }\r\n            map.setFilter('selected-area-pref', [\"==\", code_prop, code]);\r\n            clickCity(features[0].properties, warning_data[layer][code]);\r\n        }\r\n\r\n        function createSelectLayer(){\r\n            // const layers = [\"city\", \"division\", \"distlict\", \"pref\"];\r\n            const layers = [\"pref\"];\r\n            layers.reverse().map((layer) => {\r\n                var source_layer = ((layer === 'city') ? '' : layer) + 'allgeojson';\r\n                map.addLayer({\r\n                    \"id\": \"featured-area-\" + layer,\r\n                    \"type\": \"fill\",\r\n                    \"source\": \"vtile-\" + layer,\r\n                    \"source-layer\": source_layer,\r\n                    \"paint\": {\r\n                        \"fill-color\": \"rgba(250,250,250,1)\",\r\n                        \"fill-outline-color\": \"rgba(250, 30, 30, 1)\",\r\n                    },\r\n                    \"filter\": [\"==\", \"code\", \"\"],\r\n                });\r\n                return null;\r\n            });\r\n        }\r\n        \r\n        this.map = map;\r\n    }\r\n\r\n    changeFeaturedArea(props) {\r\n        if(!props.code) return;\r\n        if(props.code === this.state.code) return;\r\n        this.setState({\"code\": props.code});\r\n        console.log(props.code);\r\n\r\n        var layerId = \"featured-area-pref\";\r\n        var code_prop = 'prefCode';\r\n\r\n        var filter = [\"any\", [\"==\", code_prop, \"\"]];\r\n        props.code.map(c => {\r\n            filter.push([\"==\", code_prop, c]);\r\n            return c;\r\n        })\r\n\r\n        this.map.setFilter(layerId, filter);\r\n        this.map.moveLayer('featured-area-pref');\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.map.remove();\r\n    }\r\n\r\n    componentDidUpdate(props){\r\n        this.changeFeaturedArea(props);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <HoverCordinate name={this.state.mouseover} />\r\n                <div className={'map'} ref={e => (this.container = e)} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction HoverCordinate(name){\r\n    if(!(name.name)) return <div></div>;\r\n    return (\r\n        <div className='hoverInformation'>\r\n            <p>{name.name}</p>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Map;","import React from 'react';\r\nimport './style/coodinate.css';\r\n\r\nexport default function Coodinate(props){\r\n    var feature = props.feature;\r\n    if (!feature) return <div></div>;\r\n\r\n    if (Object.keys(feature).length > 2){\r\n        return (\r\n            <div className=\"coodinate\">\r\n                {feature.prefName} → {feature.distlictName} → {feature.divisionName} → {feature.name}\r\n            </div>\r\n        );\r\n    } \r\n    else {\r\n        return (\r\n            <div className=\"coodinate\">\r\n                {feature.prefName} \r\n                <p style={{\"fontSize\": \"small\", marginTop: \"0.5rem\"}}>{feature.prefCode}</p>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport './style/label.css';\r\n\r\nexport default function WarningLabel(props){\r\n    if(!props.warnings)\r\n        return(<div></div>);\r\n\r\n    if(props.warnings.warnings.length === 0){\r\n        return (<div className=\"label-area\"><p className=\"label default\">発表無し</p></div>);\r\n    }\r\n    else{\r\n        var labels = props.warnings.warnings.map((w, i) => {\r\n            if(w.lastIndexOf(\"特別警報\") !== -1){\r\n                return <p className=\"label emergency\" key={i}>{w}</p>;\r\n            }else if(w.lastIndexOf(\"警報\") !== -1){\r\n                return <p className=\"label warning\" key={i}>{w}</p>;\r\n            }else if(w.lastIndexOf(\"注意報\") !== -1){\r\n                return <p className=\"label advisory\" key={i}>{w}</p>;\r\n            }\r\n            return null;\r\n        });\r\n        return <div className=\"label-area\">{labels}</div>;\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport './style/period.css';\r\nimport {get, WeatherXmlQueryOption, xmlSearch} from './tools/Get.js';\r\nimport { str2date, date2str_withformat } from './tools/Datetime';\r\n\r\nexport default class WarnPeriod extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            start: {        // 情報の発表タイミング\r\n                date: 11,\r\n                term: 6     // 0:00-0, 3:00-1, 6:00:2, 9:3, 12:4, 15:5, 18:6, 21:7\r\n            },              // startから8ターム、24時間後まで\r\n            warning: null,     //data,\r\n            code: null,\r\n            error: false\r\n        }\r\n        this.callflag = false;\r\n        this.cache = {};\r\n    }\r\n\r\n    // 開始日時の取得を行う関数の作成\r\n    getStartTime(date_str){\r\n        var time = str2date(date_str);\r\n        return ({\r\n            date: time.getDate(),\r\n            term: Math.floor(time.getHours() / 3),\r\n        });\r\n    }\r\n\r\n    whichTypeWarning(w){\r\n        if(w.lastIndexOf(\"特別警報\") !== -1){\r\n            return \"emergency\";\r\n        }else if(w.lastIndexOf(\"警報\") !== -1){\r\n            return \"warning\";\r\n        }else if(w.lastIndexOf(\"注意報\") !== -1){\r\n            return \"advisory\";\r\n        }\r\n        return \"\";\r\n    }\r\n\r\n    time2mappingIndex(n_time) {\r\n        var time = this.convertDatetimeFormat(n_time);\r\n        if (this.state.start.date === time.date) {\r\n            var mapIndex = time.term - this.state.start.term;\r\n            return mapIndex >= 0 ? mapIndex : 0;\r\n        } else {\r\n            mapIndex = 8 - this.state.start.term + time.term;\r\n            return mapIndex >= 0 ? mapIndex : 0;\r\n        }\r\n    }\r\n    \r\n    zenkaku2hankaku(str) {\r\n        return str.replace(/[Ａ-Ｚａ-ｚ０-９]/g, function(s) {\r\n            return String.fromCharCode(s.charCodeAt(0) - 0xFEE0);\r\n        });\r\n    }\r\n\r\n    extractNumber(str){\r\n        var num = str.replace(/[^0-9]/g, '');\r\n        return parseInt(num);\r\n    }\r\n\r\n    term2number(str) {\r\n        const terms = {\"未明\":0, \"明け方\":1, \"朝\":2, \"昼前\":3, \"昼過ぎ\":4, \"夕方\":5, \"夜のはじめ頃\":6, \"夜遅く\":7};\r\n        return !terms[str] ? 0 : terms[str];\r\n    }\r\n\r\n    convertDatetimeFormat(obj){\r\n        return {\r\n            date: this.extractNumber(this.zenkaku2hankaku(obj.date)),\r\n            term: this.term2number(obj.term)\r\n        };\r\n    }\r\n\r\n    mappingPeriod(elem, mapping, num, property){\r\n        var start, end;\r\n        if(!(!property[elem])) {\r\n            const period = property[elem];\r\n            start = !period.startTime ? 0 : this.time2mappingIndex(period.startTime);\r\n            end = !period.endTime ? 8 : this.time2mappingIndex(period.endTime);\r\n            if(!(!period.zoneTime)) {\r\n                start = end = this.time2mappingIndex(period.zoneTime);\r\n            }\r\n\r\n            for(var i = start; i <= end; i += 1){\r\n                mapping[i] = mapping[i] > num ? mapping[i] : num;\r\n            }\r\n        }\r\n        return mapping;\r\n    }\r\n\r\n    CreateDays(){\r\n        var day_colum = [<div className=\"datetime head\" key=\"day\">日付</div>];\r\n        var day = this.state.start.date;\r\n        var term = this.state.start.term;\r\n        var columNum = 2;\r\n\r\n        for(var i = 0; i < 9; i += 1){\r\n            term += 1;\r\n            if(term <= 8){\r\n                continue;\r\n            }\r\n            day_colum.push(<div className=\"datetime middle\" style={{\"gridColumn\": columNum +\"/\"+ (i+2)}} key={day}>{day}日</div>);\r\n            term = 0;\r\n            day += 1;\r\n            columNum = i + 2;\r\n        }\r\n        day_colum.push(<div className=\"datetime middle end\" style={{\"gridColumn\": columNum +\"/\"+ 11}} key={day}>{day}日</div>);\r\n        return <div className=\"grid\">{day_colum}</div>\r\n    }\r\n\r\n    CreateTimes(){\r\n        var time_colums = [<div className=\"datetime head\" key=\"time\">時間</div>];\r\n        var term = this.state.start.term;\r\n\r\n        for(var i = 0; i < 9; i += 1){\r\n            if(term > 7){\r\n                term = 0;\r\n            }\r\n            if(i === 8)\r\n                time_colums.push(<div className=\"datetime end\" key={i}>{term * 3} - {(term + 1) * 3}</div>);\r\n            else\r\n                time_colums.push(<div className=\"datetime middle\" key={i}>{term * 3} - {(term + 1) * 3}</div>);\r\n            term += 1;\r\n        }\r\n        return <div className=\"grid\">{time_colums}</div>;\r\n    }\r\n\r\n    CreatePeriod(type){\r\n        if (!(type.property)) return;\r\n        if (type.status === \"解除\") {\r\n            return (<div className=\"grid\" key={type.name}>\r\n                {/* <div className={\"item head\"}> {type.name} </div>\r\n                <div className={\"item end\"} style={{\"gridColumn\" : \"2/11\"}}>解除</div> */}\r\n            </div>);\r\n        }\r\n        if (type.status === \"発表警報・注意報はなし\"){\r\n            return (<div className=\"grid\" key=\"none\">\r\n                <div className={\"item head\"}> 発表無し </div>\r\n            </div>);\r\n        }\r\n\r\n        var tag = type.property.map((property, index) => {\r\n            const colorClass = [\"\", \"advisory\", \"warning\", \"emergency\"];\r\n            var mapping = [0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n    \r\n            mapping = this.mappingPeriod(\"emergencyPeriod\", mapping, 3, property);\r\n            mapping = this.mappingPeriod(\"warningPeriod\", mapping, 2, property);\r\n            mapping = this.mappingPeriod(\"advisoryPeriod\", mapping, 1, property);\r\n            \r\n            var detail = property.type;\r\n            // マッピングをもとにタグ生成\r\n            var head = <div className={\"item head \" + this.whichTypeWarning(type.name)}> {type.name} ({detail})</div>;\r\n            var colums = mapping.map((id, index) => {\r\n                if(index === mapping.length - 1)\r\n                    return <div className={\"item end \" + colorClass[id]} key={type.name + index} value={id}></div>;\r\n                return <div className={\"item \" + colorClass[id]} key={type.name + index} value={id}></div>;\r\n            });\r\n\r\n            return <div className=\"grid\" key={type.name + index}>{head}{colums}</div>;\r\n        })\r\n\r\n        return (\r\n            <div key={type.name}>\r\n                {tag}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    shouldComponentUpdate(nextP, nextS){\r\n        return !(this.state.warning === nextS.warning &&\r\n            this.props.code === nextP.code);\r\n    }\r\n\r\n    async downloadData(code){\r\n        if(code in this.cache){\r\n            this.setState({\r\n                error: false,\r\n                head: this.cache[code].head,\r\n                start: this.getStartTime(this.cache[code].control.dateTime),\r\n                warning: this.cache[code].body.warning, \r\n                code: code,\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.callflag = true\r\n\r\n        // Generate Search Query\r\n        var opt = new WeatherXmlQueryOption();\r\n        var start = new Date();\r\n        start.setDate(start.getDate() - 2)\r\n        opt.setValues({\r\n            title: \"気象特別警報・警報・注意報\",\r\n            areacode: code,\r\n        });\r\n        opt.setDatetime(start, new Date());\r\n\r\n        // Search JMA-XML\r\n        var list = await xmlSearch(opt).then(res => res.json());\r\n\r\n        if(list.data.length === 0){\r\n            this.callflag = false;\r\n            return;\r\n        };\r\n\r\n        // show JMA-XML\r\n        var request = list.data[0].link + \".json\";\r\n        await get(request.substring(5, request.length)).then(res => res.json()).then(content => {\r\n            console.log(content);\r\n            console.log(this.getStartTime(content.report.control.dateTime))\r\n            this.cache[code] = content.report;\r\n            this.setState({\r\n                error: false,\r\n                head: content.report.head,\r\n                start: this.getStartTime(content.report.control.dateTime),\r\n                warning: content.report.body.warning, \r\n                code: code,\r\n            });\r\n        }).catch(err => {\r\n            console.log(err);\r\n            this.setState({error: true, warning: {}, code: this.props.code.prefCode});\r\n        }).finally(() => {\r\n            this.callflag = false;\r\n        });\r\n    }\r\n\r\n    renderFigure() {\r\n        var days = this.CreateDays();\r\n        var times = this.CreateTimes();\r\n        var target = this.state.warning[3].item[0];\r\n        if(!!this.props.code.code){\r\n            for(var index = 0; index < this.state.warning[3].item.length; index += 1){\r\n                if(this.props.code.code === this.state.warning[3].item[index].area.code){\r\n                    target = this.state.warning[3].item[index];\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        var types = target.kind.map(k => this.CreatePeriod(k));\r\n\r\n        const reportTime = str2date(this.state.head.targetDateTime);\r\n        return (\r\n            <div className=\"period-area\">\r\n                <div className=\"warning-text\">\r\n                    <h4 className=\"head\">{this.state.head.title}</h4>\r\n                    <p className=\"body\">{this.state.head.headline.text}</p>\r\n                    <p className=\"reporttime\">発表時刻：{date2str_withformat(reportTime, \"YYYY/MM/DD hh:mm\")}</p>\r\n                </div>\r\n                <div className=\"outline\">\r\n                    <div className=\"arealabel\">{target.area.name} (code: {target.area.code})</div>\r\n                    {days}\r\n                    {times}\r\n                    {types}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render(){\r\n        // 地域が選択されていないとき\r\n        if(!this.props.code){\r\n            console.log(\"area none\");\r\n            return <div>地域を選択</div>;\r\n        }\r\n\r\n        var code = this.props.code.prefCode;\r\n        //　気象警報情報の取得\r\n        if(!this.callflag && code !== this.state.code){\r\n            this.downloadData(code);\r\n        }\r\n\r\n        // waiting for get data\r\n        if(!this.state.warning){    \r\n            return <div>Wait a moment.....</div>;\r\n        }\r\n        else if(this.state.error){\r\n            return <div style={{\"marginTop\": \"1rem\"}}>No Data or Network Error</div>;\r\n        }\r\n        else{\r\n            return this.renderFigure(code)\r\n        }\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { OffCanvas, OffCanvasMenu, OffCanvasBody } from \"react-offcanvas\";\r\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\r\nimport './components/style/App.css';\r\nimport Map from './components/Map.js';\r\nimport Coodinate from './components/Coordinate.js';\r\nimport WarningLabel from './components/WarningLabel.js';\r\n// import WarnTextForm from './components/Form.js';\r\nimport WarnPeriod from './components/WarnPeriod.js'\r\n\r\n\r\nclass App extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = { \r\n      \"feature\": null,\r\n      \"warn\": null,\r\n      \"code\": \"\",\r\n      \"isMenuOpened\": false,\r\n    };\r\n  }\r\n\r\n  selectFeature(feature, warn){\r\n    if (JSON.stringify(this.state.feature) !== JSON.stringify(feature)){\r\n      this.setState({ \"feature\": feature, \"warn\": warn });\r\n    }\r\n\r\n    if (this.state.feature){\r\n      this.handleClick(true);\r\n    }\r\n  }\r\n\r\n  setCode(code) {\r\n    if(code !== this.state.code)\r\n      this.setState({\"code\": code});\r\n  }\r\n  \r\n  handleClick(doopen) {\r\n    // toggles the menu opened state\r\n    if (doopen !== this.state.isMenuOpened){\r\n      this.setState({ isMenuOpened: doopen });\r\n    }\r\n  }\r\n\r\n  canvasSizeModuler() {\r\n    var sw = window.innerWidth;\r\n    if(sw >= 800){\r\n      return 800;\r\n    }\r\n    else{\r\n      return sw;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <OffCanvas\r\n          width={this.canvasSizeModuler()}\r\n          transitionDuration={400}\r\n          effect={\"parallax\"}\r\n          isMenuOpened={this.state.isMenuOpened}\r\n          position={\"right\"}\r\n        >\r\n\r\n          <OffCanvasBody className={\"canvas-body\"}>\r\n            <Coodinate feature={this.state.feature} />\r\n            <Map click={(v, w) => this.selectFeature(v, w)} code={this.state.code} />\r\n          </OffCanvasBody>\r\n\r\n          <OffCanvasMenu className={\"canvas-menu\"}>\r\n            <ArrowForwardIosIcon fontSize=\"large\" onClick={()=>this.handleClick(false)} className={\"canvas-back-icon\"} />\r\n            <Coodinate feature={this.state.feature} />\r\n            <WarningLabel warnings={this.state.warn} />\r\n            {/* <WarnTextForm feature={this.state.feature} changeSelect={this.setCode.bind(this)} /> */}\r\n            <WarnPeriod code={this.state.feature} />\r\n          </OffCanvasMenu>\r\n        </OffCanvas>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}